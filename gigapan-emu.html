<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="gigapan_core_modified.js" type="text/javascript"></script>

<style>
body {
	background-color: #000000;
}
</style>

<div id="gigapan-viewer"></div>

<script type="text/javascript">
	var isMobileDeviceUserAgent = false; // seems to be required in gigapan_core
	var viewer;

	// Will be called by index2.js with appropriate params
	var loadViewer = function(id, width, height, levels) {
	  viewer = new org.gigapan.viewers.SeadragonViewer("gigapan-viewer", {
	    id: id,
	    auth_key: null,
	    width: width,
	    height: height,
	    levels: levels,
			title: "Navigator",
			printable: false,
	    is_private: false,
			snapshottable: false,
			related : null,
			options: {
				showGigapanWatermarkByDefault: false,
				showGigapanWatermarkOnFullscreen: false,
				showNavigationControl: false,
				showFullScreenButton: false,
				showResetButton: false,
				showPrintButton: false,
				showSnapshotBrowser: false,
				showSnapshotByDefault: false,
				showThumbnailNavigation: false,
				showRelatedGigapans: false
			} 
		});
	}

	// Expose pan and zoom functions

	var panBy = function(dx,dy) {
		// console.log("Panning by " + dx + "," + dy)
		
		if (viewer) {
			var viewport = viewer.getViewport();
			if (viewport) {
				viewport.panBy(new Seadragon.Point(dx, dy));
				viewport.applyConstraints();
			} 
		}
	}

	var zoomBy = function(factor) {
		//console.log("Zooming by " + factor)
		
		if (viewer) {
			var viewport = viewer.getViewport();
			if (viewport) {
				viewport.zoomBy(factor);
				viewport.applyConstraints();
			} 
		}
	}


</script>  
